<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
  <head>
    <th:block th:insert="~{/fragment-head}"></th:block>
  </head>
  <body>
    <!-- ======= Header ======= -->

    <header class="fixed-top">
      <p>這個還沒有改</p>   
      <th:block th:insert="~{/front-end/seller/header-seller}"></th:block>
    </header>

	
    <!-- ======= Main ======= -->
    <main class="main-nosidebar">
      <div class="container-fluid seller-container">
        <h1>註冊買家資料</h1>

        <form
          class="row g-3"
          id="myForm"
          th:action="@{/buyer/register/check}"
          th:object="${buyerVO}"
          method="post"
          enctype="multipart/form-data"
          onsubmit="return updateHiddenFields();"
        >

				<div class="col-md-12">
					<label for="inputMemberEmail" class="form-label">電子信箱</label> 
					<input
						type="text" 
						class="form-control" 
						id="inputMemberEmail"
						name="memberEmail" 
						placeholder="請輸入電子信箱,將做為您登入的帳號"
						th:value="${buyerVO.memberEmail}" />
					<div id="memberEmailFeedback" class="invalid-feedback">
						"輸入電子信箱錯誤提示訊息"</div>
					<div class="valid-feedback">Looks Good!</div>
				</div>

				<div class="col-md-12">
					<label for="inputMemberPassword" class="form-label">密碼</label> <input
						type="text" class="form-control" id="inputMemberPassword"
						name="memberPassword" placeholder="請輸入包含英文與數字6~8字之間的密碼" 
						th:value="${buyerVO.memberPassword}"/>
					<div id="memberPasswordFeedback" class="invalid-feedback">
						"輸入密碼錯誤提示訊息"</div>
					<div class="valid-feedback">Looks Good!</div>
				</div>

				<div class="col-md-12">
					<label for="inputChecKMemberPassword" class="form-label">確認密碼</label>
					<input type="text" class="form-control"
						id="inputChecKMemberPassword" name="checkMemberPassword"
						placeholder="請輸入相同密碼" 
						th:value="${buyerVO.memberPassword}"/>
					<div id="checKMemberPasswordFeedback" class="invalid-feedback">
						"再次輸入密碼錯誤提示訊息"</div>
					<div class="valid-feedback">Looks Good!</div>
				</div>

				<div class="col-md-12">
					<label for="inputMemberName" class="form-label">用戶名稱</label> <input
						type="text" class="form-control" id="inputMemberName"
						name="memberName" placeholder="請輸入您的稱呼" 
						th:value="${buyerVO.memberName}"/>
					<div id="memberNameFeedback" class="invalid-feedback">
						"輸入用戶名稱錯誤提示訊息"</div>
					<div class="valid-feedback">Looks Good!</div>
				</div>

				<div class="col-md-12">
					<label for="inputMemberPhone" class="form-label">會員電話</label> <input
						type="text" class="form-control" id="inputMemberPhone"
						name="memberPhone" placeholder="請輸入市區號碼" 
						th:value="${buyerVO.memberPhone}"/>
					<div id="memberPhoneFeedback" class="invalid-feedback">
						"輸入市話錯誤提示訊息"</div>
					<div class="valid-feedback">Looks Good!</div>
				</div>

				<div class="col-md-12">
					<label for="inputMemberMobile" class="form-label">手機號碼</label> <input
						type="text" class="form-control" id="inputMemberMobile"
						name="memberMobile" placeholder="請輸入手機號碼" 
						th:value="${buyerVO.memberMobile}"/>
					<div id="memberMobileFeedback" class="invalid-feedback">
						"輸入手機錯誤提示訊息"</div>
					<div class="valid-feedback">Looks Good!</div>
				</div>

				<div class="col-mb-3">
					<label for="inputMemberBirthday" class="col-sm-2 col-form-label">生日</label>
					<div class="col-sm-12">
						<input type="date" class="form-control" name="memberBirthday"
						th:value="${buyerVO.memberBirthday}"
						/>
					</div>
				</div>

				<div class="col-md-12">
					<label for="inputMemberAddress" class="form-label">地址</label>
					<!-- <div class="city-selector-set col-md-12 d-flex flex-row">
            <div class="col-md-2">
              <select class="county form-select" name="county"></select>
            </div>
            <div class="col-md-2">
              <select class="district form-select" name="district"></select>
            </div>
            <div class="col-md-2">
              <input class="zipcode form-control" type="text" size="3" readonly placeholder="郵遞區號" name="zipcode" />
            </div>
          </div> -->
					<input type="text" class="form-control mt-2"
						id="inputMemberAddress" name="memberAddress" placeholder="請輸入地址" 
						th:value="${buyerVO.memberAddress}"
						/>
					<div id="memberAddressFeedback" class="invalid-feedback">
						"輸入地址錯誤提示訊息"</div>
					<div class="valid-feedback">Looks Good!</div>
				</div>

				<div class="col-md-3" style="display: none;">
					<label for="inputIsMemberEmail" class="form-label">信箱是否已經審核</label>
					<select class="isMemberEmail form-select" name="isMemberEmail"
						id="inputIsMemberEmail">
						<option value="true">已審核</option>
						<option value="false" selected>未審核</option>
					</select>
					<div id="isMemberEmailFeedback" class="invalid-feedback">
						"電子信箱審核驗證錯誤提示訊息"</div>
					<div class="valid-feedback">Looks Good!</div>
				</div>

				<div class="col mb-3" style="display: none;">
					<label for="inputDate" class="col-sm-2 col-form-label">帳號創立時間</label>
					<div class="col-sm-3">
						<input type="date" class="form-controlf"
							name="memberRegistrationTime" readonly
							th:value="${buyerVO.memberRegistrationTime}">
					</div>
					<div id="memberRegistrationTimeFeedback" class="invalid-feedback">
						"創建帳號時間錯誤提示訊息"</div>
					<div class="valid-feedback">Looks Good!</div>
				</div>

				<div class="col-md-12">
					<label for="inputPetName" class="form-label">寵物名稱</label> <input
						type="text" class="form-control" id="inputPetName" name="petName"
						placeholder="請輸入寵物名稱" th:value="${buyerVO.petName}"/>
					<div id="petNameFeedback" class="invalid-feedback">
						"輸入寵物名稱錯誤提示訊息"</div>
					<div class="valid-feedback">Looks Good!</div>
				</div>

				<div class="upload__box">
					<label for="inputPetImg" class="btn btn-sellerdark">請選擇寵物圖片</label>
					<input type="file" data-max_length="1"
						class="form-control upload__inputfile" id="inputPetImg"
						name="petImg" onclick="previewImage()"
						onchange="hideContent('upFiles.errors');" />
					<div class="valid-feedback">Looks Good!</div>
					<div id="adImgFeedback" class="invalid-feedback">Please
						provide a valid Picture.</div>
					<div id="blob_holder"></div>
					<span class="error" th:utext="${errorMessage}" id="upFiles.errors">${errorMessage}</span>
					<div class="upload__img--wrap"></div>
				</div>

				<div class="col-md-12">
					<label for="inputPetVaccName1" class="form-label">施打疫苗1</label> <input
						type="text" class="form-control" id="inputPetVaccName1"
						name="petVaccName1" placeholder="輸入疫苗名稱" />
				</div>

				<div class="col-mb-3">
					<label for="inputPetVaccTime1" class="col-sm-2 col-form-label">施打時間1</label>
					<div class="col-sm-12">
						<input type="date" class="form-control" name="petVaccTime1">
					</div>
				</div>

				<div class="col-md-12">
					<label for="inputPetVaccName2" class="form-label">施打疫苗2</label> <input
						type="text" class="form-control" id="inputPetVaccName2"
						name="petVaccName2" placeholder="輸入疫苗名稱" />
				</div>

				<div class="col-mb-3">
					<label for="inputPetVaccTime2" class="col-sm-2 col-form-label">施打時間2</label>
					<div class="col-sm-12">
						<input type="date" class="form-control" name="petVaccTime2">
					</div>
				</div>

				<div class="col-md-3" style="display: none;">
					<label for="inputIsConfirm" class="form-label">用戶資料是否生效</label> <select
						class="isConfirm form-select" name="isConfirm" id="inputIsConfirm">
						<option value="true" selected>有效</option>
						<option value="false">停權</option>
					</select>
				</div>

				<br> <br>

          <div class="text-center d-flex flex-row gap-5 justify-content-center">
            <button type="reset" class="btn btn-secondary">取消並離開</button>
            <button type="submit" class="btn btn-primary">提交修改</button>
          </div>
        </form>
      </div>
    </main>

    <!-- End Main -->

    <!-- ======= Footer ======= -->

    <div th:replace="@{fragment-footer}"></div>
    <div th:replace="@{fragment-js}"></div>

    <!-- Local JS File -->

    <script>
      document.addEventListener("DOMContentLoaded", function () {
        var countyValue = document
          .querySelector(".county")
          .getAttribute("data-countyValue");
        console.log(countyValue); // 將印出 "台北市"
      });

      window.onload = function () {
        // 監聽自定義事件，當 loadjs 完成時觸發

        new TwCitySelector({
          el: ".city-selector-set",
          elCounty: ".county",
          elDistrict: ".district",
          elZipcode: ".zipcode",
          countyValue: document.querySelector("#sellerCountyValue").value,
          districtValue: document.querySelector("#sellerDistrictValue").value,
        });
      };

      function updateHiddenFields() {
        // 取得選擇的縣市和區域的值
        var selectedCounty = document.querySelector(".county").value;
        var selectedDistrict = document.querySelector(".district").value;

        // 更新隱藏欄位的值
        document.getElementById("sellerCountyValue").value = selectedCounty;
        document.getElementById("sellerDistrictValue").value = selectedDistrict;

        // 返回 true 允許表單繼續提交，或者返回 false 阻止表單提交
        return checkFormBeforeSubmit();
      }

      function checkFormBeforeSubmit() {
        // 取得表單元素
        var form = document.getElementById("myForm");

        // 檢視表單內容
        var formData = new FormData(form);
        var formContent = "";

        for (var pair of formData.entries()) {
          formContent += pair[0] + ": " + pair[1] + "\n";
        }

        // 顯示表單內容，這裡使用 alert 作為示例，你可以根據需求進行更複雜的處理
        alert("表單內容：\n" + formContent);

        // 返回 true 允許表單繼續提交，或者返回 false 阻止表單提交
        return true;
      }
    </script>
  </body>
  
   <!-- ======= Footer ======= -->
    <footer class="footer-nosidebar">
      <div
        class="row row-cols-1 row-cols-sm-2 row-cols-md-4 pt-5 border-top footer-container-custom text-white"
      >
        <div class="col d-none d-sm-block p-sm-2 px-5 px-sm-5 px-md-0"></div>

        <div class="col p-sm-2 px-5 px-sm-5 px-md-0">
          <h5 class="mb-3">關於我們</h5>
          <ul class="nav flex-column">
            <li class="nav-item mb-2">
              <a href="#" class="nav-link p-0 text-body-secondary">人才招募</a>
            </li>
            <li class="nav-item mb-2">
              <a href="#" class="nav-link p-0 text-body-secondary">E狗簡介</a>
            </li>
          </ul>
        </div>

        <div class="col p-sm-2 px-5 px-sm-5 px-md-0">
          <h5 class="mb-3">常見問題</h5>
          <ul class="nav flex-column">
            <li class="nav-item mb-2">
              <a href="#" class="nav-link p-0 text-body-secondary">聯絡E狗</a>
            </li>
            <li class="nav-item mb-2">
              <a href="#" class="nav-link p-0 text-body-secondary">Q&A</a>
            </li>
          </ul>
        </div>
      </div>
      <div class="row footer-container-custom">
        <div class="col-3"></div>

        <div class="col-auto">
          <a
            href="/"
            class="d-flex align-items-center mb-3 link-body-emphasis text-decoration-none"
          >
          </a>
          <p class="text-body-secondary">
            新加坡商CatTom有限公司台灣分公司 統一編號：00000000 © 2023
            CatTom.版權所有。
          </p>
        </div>
      </div>
    </footer>
</html>
